# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞ –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

‚ùå **–í—ã –≤–∏–¥–µ–ª–∏ —Å–≤–æ–∏ –∂–µ –¥–µ–π—Å—Ç–≤–∏—è:**
- –°–æ–∑–¥–∞–ª–∏ –∑–∞–∫–∞–∑ ‚Üí —Å–∞–º–∏ —Å–µ–±–µ –ø—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ò–∑–º–µ–Ω–∏–ª–∏ —Å—Ç–∞—Ç—É—Å ‚Üí —Å–∞–º–∏ —Å–µ–±–µ –ø—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –í–∏–¥–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

‚ùå **–ú–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –ù–ï —Ä–∞–±–æ—Ç–∞–ª–æ:**
- –¢–µ–ª–µ—Ñ–æ–Ω ‚Üí –ü–ö: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ù–ï –ø—Ä–∏—Ö–æ–¥–∏–ª–∏
- –ü–ö ‚Üí –¢–µ–ª–µ—Ñ–æ–Ω: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ù–ï –ø—Ä–∏—Ö–æ–¥–∏–ª–∏

## –ü—Ä–∏—á–∏–Ω–∞:

–ë—ã–ª–æ **–î–í–û–ô–ù–û–ï** –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

### 1. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ Firestore listeners (–ª–æ–∫–∞–ª—å–Ω—ã–µ)
`NotificationContext.tsx` –ø–æ–¥–ø–∏—Å—ã–≤–∞–ª—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Firestore:
```typescript
// ‚ùå –ë–´–õ–û: –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–ª—É—à–∞—Ç–µ–ª—å
onSnapshot(ordersQ, snapshot => {
  // –í–∏–¥–µ–ª –í–°–ï –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ
  addNotification(...); // –î–æ–±–∞–≤–ª—è–ª –≤ UI —Å—Ä–∞–∑—É
});
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–æ –ù–ï push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è! –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∫–æ–≥–¥–∞ –≤–∫–ª–∞–¥–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞.

### 2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ callable —Ñ—É–Ω–∫—Ü–∏—é
`services.ts` –≤—ã–∑—ã–≤–∞–ª:
```typescript
// ‚ùå –ë–´–õ–û: –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
await sendNotificationToAdmins(...); // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
await sendNotificationToUser(...);   // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
```

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –û—Ç–ø—Ä–∞–≤–ª—è–ª –Ω–∞ –°–í–û–ò –∂–µ —Ç–æ–∫–µ–Ω—ã (–µ—Å–ª–∏ —É –≤–∞—Å –æ—Ç–∫—Ä—ã—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∫–ª–∞–¥–æ–∫)
- –î—É–±–ª–∏—Ä–æ–≤–∞–ª —Ä–∞–±–æ—Ç—É Cloud Functions
- –ù–µ —Ä–∞–±–æ—Ç–∞–ª –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –æ—Ñ–ª–∞–π–Ω

---

## –†–µ—à–µ–Ω–∏–µ:

### ‚úÖ –£–±—Ä–∞–ª–∏ –í–°–ï –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å **–¢–û–õ–¨–ö–û Cloud Functions** –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç push:

#### 1. `onOrderCreated` (Cloud Function)
```typescript
// –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ –õ–Æ–ë–û–ô —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ Firestore
// –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –í–°–ï–• –∞–¥–º–∏–Ω–æ–≤
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç push –¢–û–õ–¨–ö–û –∞–¥–º–∏–Ω–∞–º
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–¥–º–∏–Ω –Ω–∞ –ü–ö —Å–æ–∑–¥–∞–ª –∑–∞–∫–∞–∑ ‚Üí –∞–¥–º–∏–Ω –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–ª –∑–∞–∫–∞–∑ ‚Üí –í–°–ï –∞–¥–º–∏–Ω—ã –ø–æ–ª—É—á–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–≤–æ–µ–º –∑–∞–∫–∞–∑–µ

#### 2. `onOrderStatusUpdated` (Cloud Function)
```typescript
// –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è
// –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –í–õ–ê–î–ï–õ–¨–¶–ê –∑–∞–∫–∞–∑–∞ (userId)
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç push –¢–û–õ–¨–ö–û –≤–ª–∞–¥–µ–ª—å—Ü—É
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ê–¥–º–∏–Ω –∏–∑–º–µ–Ω–∏–ª —Å—Ç–∞—Ç—É—Å ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –∞–¥–º–∏–Ω –æ—Ñ–ª–∞–π–Ω (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
- ‚ùå –ê–¥–º–∏–Ω –ù–ï –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö

#### 3. `onProductCreated` (Cloud Function)
```typescript
// –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä
// –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –í–°–ï–• –∞–¥–º–∏–Ω–æ–≤
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç push –¢–û–õ–¨–ö–û –∞–¥–º–∏–Ω–∞–º
```

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–ï–ô–ß–ê–°:

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –∑–∞–∫–∞–∑
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** (—Ç–µ–ª–µ—Ñ–æ–Ω) —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑
2. Firestore –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ `orders/`
3. **Cloud Function `onOrderCreated`** —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4. –§—É–Ω–∫—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤ —Å `isAdmin: true`
5. –ü–æ–ª—É—á–∞–µ—Ç –∏—Ö FCM —Ç–æ–∫–µ–Ω—ã
6. **–ê–¥–º–∏–Ω—ã** (–ü–ö, —Ç–µ–ª–µ—Ñ–æ–Ω) –ø–æ–ª—É—á–∞—é—Ç push ‚úÖ
7. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –ù–ï –ø–æ–ª—É—á–∞–µ—Ç (—ç—Ç–æ –µ–≥–æ –∑–∞–∫–∞–∑) ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
1. **–ê–¥–º–∏–Ω** (–ü–ö) –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
2. Firestore –æ–±–Ω–æ–≤–ª—è–µ—Ç `orders/{orderId}/status`
3. **Cloud Function `onOrderStatusUpdated`** —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4. –§—É–Ω–∫—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∑–∞–∫–∞–∑–∞ (`userId`)
5. –ü–æ–ª—É—á–∞–µ—Ç –µ–≥–æ FCM —Ç–æ–∫–µ–Ω—ã
6. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** (—Ç–µ–ª–µ—Ñ–æ–Ω) –ø–æ–ª—É—á–∞–µ—Ç push ‚úÖ
7. **–ê–¥–º–∏–Ω** –ù–ï –ø–æ–ª—É—á–∞–µ—Ç (—ç—Ç–æ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ) ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä
1. **–ê–¥–º–∏–Ω** (–ü–ö) –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä
2. Firestore –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `products/`
3. **Cloud Function `onProductCreated`** —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4. **–ê–¥–º–∏–Ω—ã** (—Ç–µ–ª–µ—Ñ–æ–Ω) –ø–æ–ª—É—á–∞—é—Ç push ‚úÖ

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ:

### 1. `src/contexts/NotificationContext.tsx`
```diff
- // Firestore listeners - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- onSnapshot(ordersQ, ...) // –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
+ // ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏
+ // –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ FCM –æ—Ç Cloud Functions
```

### 2. `src/firebase/services.ts`
```diff
- await sendNotificationToAdmins(...) // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
+ // ‚úÖ Cloud Function onOrderCreated –æ—Ç–ø—Ä–∞–≤–∏—Ç

- await sendNotificationToUser(...) // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞  
+ // ‚úÖ Cloud Function onOrderStatusUpdated –æ—Ç–ø—Ä–∞–≤–∏—Ç
```

### 3. Cloud Functions (–ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ `onOrderCreated` - —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ `onOrderStatusUpdated` - —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ `onProductCreated` - —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## –¢–µ—Å—Ç –°–ï–ô–ß–ê–°:

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
npm start
```

–û—Ç–∫—Ä–æ–π—Ç–µ **–î–í–ê —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/–±—Ä–∞—É–∑–µ—Ä–∞**:
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê: –ê–¥–º–∏–Ω (–≤–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–≤–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

### 2. –¢–µ—Å—Ç: –ù–æ–≤—ã–π –∑–∞–∫–∞–∑

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):**
1. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
2. –û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê (–∞–¥–º–∏–Ω):** –ü–æ–ª—É—á–∏—Ç push "üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑"
- ‚úÖ –ö–æ–ª–æ–∫–æ–ª—å—á–∏–∫ –ø–æ–∫–∞–∂–µ—Ç –∫—Ä–∞—Å–Ω—É—é —Ç–æ—á–∫—É
- ‚ùå **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):** –ù–ï –ø–æ–ª—É—á–∏—Ç (—Å–≤–æ–π –∑–∞–∫–∞–∑)

### 3. –¢–µ—Å—Ç: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê (–∞–¥–º–∏–Ω):**
1. –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –ó–∞–∫–∞–∑—ã
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ "processing"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):** –ü–æ–ª—É—á–∏—Ç push "üì¶ –í–∞—à –∑–∞–∫–∞–∑ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è"
- ‚úÖ –ö–æ–ª–æ–∫–æ–ª—å—á–∏–∫ –ø–æ–∫–∞–∂–µ—Ç –∫—Ä–∞—Å–Ω—É—é —Ç–æ—á–∫—É
- ‚ùå **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê (–∞–¥–º–∏–Ω):** –ù–ï –ø–æ–ª—É—á–∏—Ç (—Å–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ)

### 4. –¢–µ—Å—Ç: Background (–∑–∞–∫—Ä—ã—Ç–∞—è –≤–∫–ª–∞–¥–∫–∞)

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê:**
1. –í–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
2. **–ó–ê–ö–†–û–ô–¢–ï –≤–∫–ª–∞–¥–∫—É –ø–æ–ª–Ω–æ—Å—Ç—å—é**

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë:**
1. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–∫–∞–∑

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê:** –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–∏—Ç—Å—è!

---

## –í–∞–∂–Ω–æ:

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
- Push –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (–ü–ö ‚Üî –¢–µ–ª–µ—Ñ–æ–Ω)
- Background —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤–∫–ª–∞–¥–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞)
- –ê–¥–º–∏–Ω—ã –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ –≤–∏–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è

### ‚ùå –ù–ï –ø–æ–ª—É—á–∞–µ—Ç–µ:
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –°–í–û–ò–• –¥–µ–π—Å—Ç–≤–∏—è—Ö (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–≥–¥–∞ –≤–∫–ª–∞–¥–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –ò –≤—ã –∞–≤—Ç–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è

### üìù –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:

**–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:**
```
‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω. Cloud Function onOrderCreated –æ—Ç–ø—Ä–∞–≤–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º: <orderId>
```

**–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞:**
```
‚úÖ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω. Cloud Function onOrderStatusUpdated –æ—Ç–ø—Ä–∞–≤–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: <userId>
```

**–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ push (foreground):**
```
üì© –ü–æ–ª—É—á–µ–Ω–æ FCM —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (foreground): {notification: {...}}
üì¨ –î–æ–±–∞–≤–ª—è–µ–º FCM —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç: {...}
‚ûï –î–æ–±–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: {...}
üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: {total: 1, unread: 1}
```

---

## –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ FCM —Ç–æ–∫–µ–Ω—ã –≤ Firestore:**
   - Firebase Console ‚Üí Firestore ‚Üí users ‚Üí {userId}
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–µ `fcmTokens: [...]`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Cloud Functions –ª–æ–≥–∏:**
   - Firebase Console ‚Üí Functions ‚Üí Logs
   - –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å: "Sent notification"

3. **–û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
await navigator.serviceWorker.getRegistrations().then(r => r.forEach(reg => reg.unregister()));
localStorage.clear();
location.reload();
```

4. **–ó–∞–Ω–æ–≤–æ –≤–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –Ω–∞ –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å push —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏!** üéâ
