# –ü–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ spicer.ua

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–∞–π—Ç–∞ spicer.ua –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç Firebase.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd scripts
npm install
```

### 2. –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞

```bash
npm run parse
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–∞–≥–∞–∑–∏–Ω–∞ spicer.ua
- –ò–∑–≤–ª–µ—á—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º —Ç–æ–≤–∞—Ä–µ
- –ó–∞–π–¥—ë—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `data/spicer-products.json`

‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~10-15 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤)

### 3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç Firebase

```bash
npm run convert
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç Firebase/Firestore
- –°–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –î–æ–±–∞–≤–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Ç–µ–≥–∏, –¥–∞—Ç—ã, –∏—Å—Ç–æ—á–Ω–∏–∫)
- –°–ª–µ–≥–∫–∞ –∏–∑–º–µ–Ω–∏—Ç –æ–ø–∏—Å–∞–Ω–∏—è (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
- –°–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `data/firebase-products.json` –∏ `data/firebase-categories.json`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
scripts/
‚îú‚îÄ‚îÄ package.json                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ spicer-parser.js            # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä
‚îú‚îÄ‚îÄ convert-to-firebase.js      # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç Firebase
‚îî‚îÄ‚îÄ README.md                   # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

data/                           # –°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îú‚îÄ‚îÄ spicer-products.json        # –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Å spicer.ua
‚îú‚îÄ‚îÄ firebase-products.json      # –¢–æ–≤–∞—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ Firebase
‚îî‚îÄ‚îÄ firebase-categories.json    # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Firebase
```

## üì¶ –ß—Ç–æ –ø–∞—Ä—Å–∏—Ç—Å—è?

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è:

- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ)
- ‚úÖ –¶–µ–Ω–∞
- ‚úÖ –û–±—ä—ë–º (50–º–ª, 500–º–ª, 700–º–ª –∏ —Ç.–¥.)
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–î–∂–∏–Ω, –õ—ñ–∫–µ—Ä–∏, –ù–∞—Å—Ç–æ—è–Ω–∫–∏ –∏ —Ç.–¥.)
- ‚úÖ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –°–æ—Å—Ç–∞–≤/–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
- ‚úÖ –ö—Ä–µ–ø–æ—Å—Ç—å (% –∞–ª–∫–æ–≥–æ–ª—è)
- ‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–æ–≤–∞—Ä

## üé® –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö Firebase

–ö–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "id": "sp_1732384756_abc123",
  "name": "APPLE DISTILL (–Ø–±–ª—É—á–Ω–∏–π –±—Ä–µ–Ω–¥—ñ)",
  "description": "–ü—Ä–µ–º—ñ–∞–ª—å–Ω–∏–π —è–±–ª—É—á–Ω–∏–π –±—Ä–µ–Ω–¥—ñ –∑ –Ω—ñ–∂–Ω–∏–º –∞—Ä–æ–º–∞—Ç–æ–º...",
  "price": 105,
  "originalPrice": 105,
  "imageUrl": "https://spicer.ua/wp-content/uploads/2024/10/apple_distill_005.jpg",
  "hoverImageUrl": "https://spicer.ua/wp-content/uploads/2024/10/apple_distill_005.jpg",
  "category": "Distill",
  "subcategory": "",
  "volume": "50 –º–ª",
  "volumeNumeric": 50,
  "alcoholContent": "40%",
  "ingredients": "—è–±–ª—É–∫–∞, —Å–ø–∏—Ä—Ç...",
  "inStock": true,
  "stockQuantity": 100,
  "featured": false,
  "discount": 0,
  "tags": ["distill", "–º—ñ–Ω—ñ"],
  "createdAt": "2024-11-23T...",
  "updatedAt": "2024-11-23T...",
  "source": "spicer.ua",
  "sourceLink": "https://spicer.ua/product/..."
}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

–í —Ñ–∞–π–ª–µ `spicer-parser.js` –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```javascript
const maxPages = 10; // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

–ß—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Å–µ—Ä–≤–µ—Ä:

```javascript
await new Promise(resolve => setTimeout(resolve, 2000)); // 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
```

## üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è `firebase-products.json` –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Admin Panel

1. –û—Ç–∫—Ä–æ–π—Ç–µ Admin Panel –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤"
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª `data/firebase-products.json`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Firebase Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Firestore Database
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)

```javascript
// upload-to-firebase.js
const admin = require('firebase-admin');
const products = require('../data/firebase-products.json');

// –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firestore –±–∞—Ç—á–∞–º–∏
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –ø—Ä–∞–≤–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ
2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –°–∫—Ä–∏–ø—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏—Ö
3. **–û–ø–∏—Å–∞–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
4. **–¶–µ–Ω—ã**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ü–µ–Ω –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Timeout"
–£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ `page.goto()`:
```javascript
await page.goto(url, { waitUntil: 'networkidle2', timeout: 90000 });
```

### –ù–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–≤–∞—Ä—ã
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä `.products .product` - –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∞–π—Ç–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å.

### Puppeteer –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
sudo apt-get install -y chromium-browser
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–¢–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.
